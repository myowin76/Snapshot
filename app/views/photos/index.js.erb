// $("#map-view").html("<%= j render("map_view") %>");

// 	Gmaps.map = new Gmaps4RailsGoogle();
// 	Gmaps.load_map = function() {
//     Gmaps.map.map_options.maxZoom = 20;
//     Gmaps.map.map_options.clusterer_gridSize = 100;
//     Gmaps.map.initialize();
//     Gmaps.map.markers = <%=raw @json %>;
//     Gmaps.map.create_markers();
//     Gmaps.map.adjustMapToBounds();
//     Gmaps.map.callback();
// 	};
// 	Gmaps.loadMaps();

// $(".loader_cont").show();
// $("aside h4").html("<%= @photos.count %> photos found");

// // $(".span8 h4").html("<%= @photos.count %> photos found");

$(".photo-view").html("<%= j render('grid_view') %>");


$(document).ready(function() {
  // duplicate in application.js
  $('.go-top').on('click',function(e){
    e.preventDefault();
    $('html, body').animate({
      scrollTop: $(".tab-content").offset().top
    }, 500);
  });

  // duplicate in application.js // refactor
  $('#reviews').on('click', function(){
    if ($(".photo-view .photos-viewer input[name='photo_ids[]']:checked").length < 1){
      alert("Please select images");
      return false;
    }
    $(".photo-view .photos-viewer input[name='photo_ids[]']:not(:checked)").each(function(){
      $(this).closest('li').hide();
    });
    $(this).hide();
    $('#show-all').show();
    return false;
  });

  $('#show-all').on('click', function(){
    $(".photo-view .photos-viewer input[name='photo_ids[]']").closest('li').show();
    $(this).hide();
    $('#reviews').show();
    return false;
  });

  // duplicate in the application.js // refactor

  $('#export-pdf').on('click',function(){
    checkbox_array = $("input[name='photo_ids[]']:checked").serializeObject()['photo_ids[]'];
    if (checkbox_array == undefined) {
      alert("Please select the image");
      return false;
    }
    else{
      url = '/photos/generate_pdf.pdf?photo_ids=' + checkbox_array;
      $(this).attr('href', url);
    }  
  });

  $('#export-zip').on('click', function(e){
    checkbox_array = $("input[name='photo_ids[]']:checked").serializeObject()['photo_ids[]'];
    if (checkbox_array == undefined) {
      alert("Please select the image");
      return false;
    };
    url = '/photos/generate_zip?photo_ids=' + checkbox_array;
    $(this).attr('href', url);
  });
});

  